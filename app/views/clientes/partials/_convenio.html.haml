#convenio.tab-pane.fade
  - if @cliente.id?
    .row
      .col-sm-10.col-md-11
        =render 'clientes/partials/cliente_legend'
  .col-xs-12.col-sm-12.col-md-6.col-lg-6
    .row
      %input{:type=>"hidden", :class => "form-control", :id => "cliente_convenio_id"}
    -# .row
    -#   -if params[:agenda_id]
    -#     .panel.panel-warning
    -#       .panel-heading
    -#         .container-fluid
    -#           %label Utilizar nessa Agenda agora?
    -#           %input{type: "checkbox", name: "cliente_convenio_utilizando_agora", id: "cliente_convenio_utilizando_agora"}
    -# .row
    -#   .col-xs-12.col-sm-5.col-md-4.col-lg-4
    -#     %label{class: "string control-label"}
    -#       Status Convênio
    -#     %br
    -#     = collection_radio_buttons(:cliente_convenio, :status_convenio, [[true, 'Ativo'] ,[false, 'Inativo']], :first, :last, :class => "status_convenio_radio_buttons", checked: true)
    .row
      .col-xs-12.col-sm-5.col-md-6.col-lg-6
        %label{class: "string control-label"}
          Matrícula
        %input{:type=>"text", :class => "form-control", :id => "cliente_convenio_matricula"}
      .col-xs-12.col-sm-5.col-md-6.col-lg-6
        %label{class: "string required control-label"}
          Convênio
        = select(:cliente_convenio, :convenio_id, Convenio.order(:nome).collect {|p| ["#{p.nome}", "#{p.id}"] }, {include_blank: "Selecione"}, class: "form-control")
    .row
      %div{class: "col-xs-12 col-sm-5 col-md-6 col-lg-6"}
        %label{class: "string control-label"}
          Validade Carteira
        %input{:type=>"text", :class => "form-control datepicker_form", :id => "cliente_convenio_validade_carteira"}
      %div{class: "col-xs-12 col-sm-5 col-md-6 col-lg-6"}
        %label{class: "string control-label"}
          Produto
        %input{:type=>"text", :class => "form-control", :id => "cliente_convenio_produto"}
    .row
      %div{class: "col-xs-12 col-sm-5 col-md-6 col-lg-6"}
        %label{class: "string control-label"}
          Titular
        %input{:type=>"text", :class => "form-control", :id => "cliente_convenio_titular"}
      %div{class: "col-xs-12 col-sm-5 col-md-6 col-lg-6"}
        %label{class: "string control-label"}
          Plano
        %input{:type=>"text", :class => "form-control", :id => "cliente_convenio_plano"}
    .row
      %div{class: "col-xs-1 col-sm-1 col-md-1 col-lg-1", style: "margin-top: 20px;"}
        =link_to "#{image_tag("icons/glyphicons-191-circle-plus-white.png", width: 22, height: 22)}".html_safe, "#", {id: "adicionar_convenio_em_cliente", class: "btn btn-primary", title: "Adicionar Convênio", remote: true}
      %div{class: "col-xs-1 col-sm-1 col-md-1 col-lg-1", style: "margin-top: 20px;"}
        =link_to "#{image_tag("icons/glyphicons-82-refresh.png", width: 22, height: 22)}".html_safe, "#", {id: "alterar_convenio_em_cliente", class: "btn btn-default", title: "Atualizar Convênio", remote: true, style: "display: none;"}
  %br/
  %div{class: "col-xs-12 col-sm-10 col-md-5 col-lg-5 pull-left"}
    %div{class: "panel panel-default"}
      %div{class: "panel-heading"}
        = "Convênio(s) Associado(s) ao Cliente"
      %div{class: "panel-body"}
        #table_cliente_convenios
          .table-responsive
            %table{class: "table table-striped table-bordered table-hover table-responsive"}
              %thead
                %th Convênio
                %th Editar
                -# %th Inativo?
                %th Utilizando Agora
              %tbody#tabela_cliente_convenios
                - if @cliente.cliente_convenios.present?
                  - @cliente.cliente_convenios.each_with_index do |c, key|
                    %tr
                      %td
                        = c.convenio.nome
                      %td
                        %center
                          -validade = c.validade_carteira.strftime("%d/%m/%Y") if c.validade_carteira?
                          =link_to "#", data: { id: c.id ,convenio_id: c.convenio.id, convenio_matricula: c.matricula, convenio_validade: validade, convenio_titular: c.titular, convenio_plano: c.plano, convenio_produto: c.produto, convenio_status: c.status_convenio}, id: "change_convenio_cliente" do
                            %i.fa.fa-pencil-square.fa-2x
                      -# %td
                      -#   %center
                      -#     -if c.status_convenio?
                      -#       %input{type: "checkbox", name: "cliente_convenio_status_convenio", id: "cliente_convenio_status_convenio", value: c.id}
                      -#     -else
                      -#       %input{type: "checkbox", name: "cliente_convenio_status_convenio", id: "cliente_convenio_status_convenio", value: c.id, checked: "checked"}
                      -if params[:agenda_id]
                        %td
                          %center
                            -if c.utilizando_agora?
                              %input{ type: "radio", name: "cliente_convenio_agenda", id: "cliente_convenio_agenda", value: c.id, checked: "checked"}
                            -else
                              %input{ type: "radio", name: "cliente_convenio_agenda", id: "cliente_convenio_agenda", value: c.id}
                      -else
                        %td
                          %center
                            -if c.utilizando_agora?
                              %input{ type: "radio", name: "cliente_convenio_agenda", id: "cliente_convenio_agenda", value: c.id, checked: "checked"}
                            -else
                              %input{ type: "radio", name: "cliente_convenio_agenda", id: "cliente_convenio_agenda", value: c.id}
